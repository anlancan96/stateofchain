<script>
    var dataWarranty = '0x60806040527336c5804a3f063487c0dc09ae93e47fc6f584f136600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555073caab445fcb3aacbf8619040217afb0ee09b01fe5600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600f60006101000a81548160ff0219169083151502179055506000600f60016101000a81548160ff0219169083151502179055503480156200013357600080fd5b5060405160608062002439833981018060405262000155919081019062000329565b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600360000160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055508160036001018190555080600360000160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550336003800160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600360020181905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166322c6d29b30336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401620002c092919062000390565b600060405180830381600087803b158015620002db57600080fd5b505af1158015620002f0573d6000803e3d6000fd5b50505050505050620003fb565b60006200030b8251620003dd565b905092915050565b6000620003218251620003e7565b905092915050565b6000806000606084860312156200033f57600080fd5b60006200034f8682870162000313565b93505060206200036286828701620002fd565b9250506040620003758682870162000313565b9150509250925092565b6200038a81620003bd565b82525050565b6000604082019050620003a760008301856200037f565b620003b660208301846200037f565b9392505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600067ffffffffffffffff82169050919050565b61202e806200040b6000396000f3006080604052600436106100a4576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630d9bb52a146100a9578063107a9fc2146100dc5780632e5113b71461011957806339461991146101465780633a7ff96414610183578063a0ebd648146101c0578063ad5c613d146101e9578063cc8a55e214610212578063d206098e1461023b578063ee8379e514610266575b600080fd5b3480156100b557600080fd5b506100be61028f565b6040516100d399989796959493929190611dde565b60405180910390f35b3480156100e857600080fd5b5061010360048036036100fe91908101906118f0565b610463565b6040516101109190611cd6565b60405180910390f35b34801561012557600080fd5b5061012e61053d565b60405161013d93929190611c9f565b60405180910390f35b34801561015257600080fd5b5061016d6004803603610168919081019061189e565b610595565b60405161017a9190611cd6565b60405180910390f35b34801561018f57600080fd5b506101aa60048036036101a5919081019061189e565b610b05565b6040516101b79190611d66565b60405180910390f35b3480156101cc57600080fd5b506101e760048036036101e29190810190611967565b610fbf565b005b3480156101f557600080fd5b50610210600480360361020b91908101906119d3565b61110d565b005b34801561021e57600080fd5b5061023960048036036102349190810190611ab1565b61120c565b005b34801561024757600080fd5b506102506112b0565b60405161025d9190611da8565b60405180910390f35b34801561027257600080fd5b5061028d60048036036102889190810190611a18565b6113dd565b005b60038060000160009054906101000a900467ffffffffffffffff16908060000160089054906101000a900467ffffffffffffffff16908060010154908060020154908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806005015490806006018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103bb5780601f10610390576101008083540402835291602001916103bb565b820191906000526020600020905b81548152906001019060200180831161039e57829003601f168201915b505050505090806007018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104595780601f1061042e57610100808354040283529160200191610459565b820191906000526020600020905b81548152906001019060200180831161043c57829003601f168201915b5050505050905089565b60008060008073ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16141515156104a357600080fd5b6104ac876114e5565b9150600182858888604051600081526020016040526040516104d19493929190611d21565b60206040516020810390808403906000865af11580156104f5573d6000803e3d6000fd5b5050506020604051035190508773ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16149250505095945050505050565b600c8060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154905083565b6000806000600f60009054906101000a900460ff1680156105c25750600f60019054906101000a900460ff165b15156105cd57600080fd5b600360040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415610863576003800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166377d32e9460036005015460036006016040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016106e3929190611cf1565b602060405180830381600087803b1580156106fd57600080fd5b505af1158015610711573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061073591908101906118c7565b73ffffffffffffffffffffffffffffffffffffffff1614915081151561075a57600080fd5b8373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166377d32e9460036005015460036007016040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016107f3929190611cf1565b602060405180830381600087803b15801561080d57600080fd5b505af1158015610821573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061084591908101906118c7565b73ffffffffffffffffffffffffffffffffffffffff16149250610afe565b6003800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415610af957600360040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166377d32e9460036005015460036007016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610979929190611cf1565b602060405180830381600087803b15801561099357600080fd5b505af11580156109a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506109cb91908101906118c7565b73ffffffffffffffffffffffffffffffffffffffff161490508015156109f057600080fd5b8373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166377d32e9460036005015460036006016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610a89929190611cf1565b602060405180830381600087803b158015610aa357600080fd5b505af1158015610ab7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610adb91908101906118c7565b73ffffffffffffffffffffffffffffffffffffffff16149250610afe565b600092505b5050919050565b6060610b0f611534565b8273ffffffffffffffffffffffffffffffffffffffff16634228724d600360000160089054906101000a900467ffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610b7d9190611dc3565b600060405180830381600087803b158015610b9757600080fd5b505af1158015610bab573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f82011682018060405250610bd49190810190611a70565b90506000816060015160ff16148015610c0f5750600360000160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1642105b15610dab576060604051908101604052806003800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600360040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600360010154815250600c60008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020155905050606060405190810160405280602781526020017f42757965722063616e20776974682064726177206d6f6e65792066726f6d204581526020017f6d706c6f796572000000000000000000000000000000000000000000000000008152509150610fb9565b600360000160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1642118015610de55750605a816060015160ff1610155b15610f80576060604051908101604052806003800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016003800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600360010154815250600c60008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020155905050606060405190810160405280602a81526020017f456d706c6f7965722063616e20776974682064726177206d6f6e65792066726f81526020017f6d20436f6e7472616374000000000000000000000000000000000000000000008152509150610fb9565b6040805190810160405280601181526020017f446f6e7420646f20736f6d657468696e6700000000000000000000000000000081525091505b50919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611050576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161104790611d88565b60405180910390fd5b600f60009054906101000a900460ff1615801561107a5750600f60019054906101000a900460ff16155b151561108557600080fd5b83600360040160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508282600360060191906110dd92919061159d565b5080600360050181600019169055506001600f60016101000a81548160ff02191690831515021790555050505050565b600360040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156111a3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119a90611d88565b60405180910390fd5b600f60009054906101000a900460ff1615806111cc5750600f60019054906101000a900460ff16155b15156111d757600080fd5b8282600360070191906111eb92919061159d565b506001600f60006101000a81548160ff021916908315150217905550505050565b600360040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156112a2576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161129990611d88565b60405180910390fd5b816003600201819055505050565b6112b861161d565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561131457600080fd5b600c606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600282015481525050905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561146e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161146590611d88565b60405180910390fd5b600f60009054906101000a900460ff1615806114975750600f60019054906101000a900460ff16155b15156114a257600080fd5b8282600360060191906114b692919061159d565b5080600360050181600019169055506001600f60016101000a81548160ff021916908315150217905550505050565b60008160405180807f19457468657265756d205369676e6564204d6573736167653a0a333200000000815250601c01826000191660001916815260200191505060405180910390209050919050565b60e060405190810160405280600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600060ff168152602001600067ffffffffffffffff16815260200160608152602001606081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106115de57803560ff191683800117855561160c565b8280016001018555821561160c579182015b8281111561160b5782358255916020019190600101906115f0565b5b509050611619919061166b565b5090565b606060405190810160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600081525090565b61168d91905b80821115611689576000816000905550600101611671565b5090565b90565b600061169c8235611f5b565b905092915050565b60006116b08251611f5b565b905092915050565b60006116c48235611f7b565b905092915050565b60008083601f84011215156116e057600080fd5b8235905067ffffffffffffffff8111156116f957600080fd5b60208301915083600182028301111561171157600080fd5b9250929050565b600082601f830112151561172b57600080fd5b815161173e61173982611ea6565b611e79565b9150808252602083016020830185838301111561175a57600080fd5b611765838284611fb0565b50505092915050565b600060e0828403121561178057600080fd5b61178a60e0611e79565b9050600061179a84828501611862565b60008301525060206117ae84828501611862565b60208301525060406117c284828501611862565b60408301525060606117d68482850161188a565b60608301525060806117ea84828501611862565b60808301525060a082015167ffffffffffffffff81111561180a57600080fd5b61181684828501611718565b60a08301525060c082015167ffffffffffffffff81111561183657600080fd5b61184284828501611718565b60c08301525092915050565b600061185a8235611f85565b905092915050565b600061186e8251611f8f565b905092915050565b60006118828235611fa3565b905092915050565b60006118968251611fa3565b905092915050565b6000602082840312156118b057600080fd5b60006118be84828501611690565b91505092915050565b6000602082840312156118d957600080fd5b60006118e7848285016116a4565b91505092915050565b600080600080600060a0868803121561190857600080fd5b600061191688828901611690565b9550506020611927888289016116b8565b9450506040611938888289016116b8565b9350506060611949888289016116b8565b925050608061195a88828901611876565b9150509295509295909350565b6000806000806060858703121561197d57600080fd5b600061198b87828801611690565b945050602085013567ffffffffffffffff8111156119a857600080fd5b6119b4878288016116cc565b935093505060406119c7878288016116b8565b91505092959194509250565b600080602083850312156119e657600080fd5b600083013567ffffffffffffffff811115611a0057600080fd5b611a0c858286016116cc565b92509250509250929050565b600080600060408486031215611a2d57600080fd5b600084013567ffffffffffffffff811115611a4757600080fd5b611a53868287016116cc565b93509350506020611a66868287016116b8565b9150509250925092565b600060208284031215611a8257600080fd5b600082015167ffffffffffffffff811115611a9c57600080fd5b611aa88482850161176e565b91505092915050565b600060208284031215611ac357600080fd5b6000611ad18482850161184e565b91505092915050565b611ae381611efa565b82525050565b611af281611f1a565b82525050565b611b0181611f26565b82525050565b6000611b1282611ee4565b808452611b26816020860160208601611fb0565b611b2f81611fe3565b602085010191505092915050565b600081546001811660008114611b5a5760018114611b7a57611bbb565b607f600283041680865260ff198316602087015260408601935050611bbb565b60028204808652602086019550611b9085611ed2565b60005b82811015611bb257815481890152600182019150602081019050611b93565b80880195505050505b505092915050565b6000611bce82611eef565b808452611be2816020860160208601611fb0565b611beb81611fe3565b602085010191505092915050565b6000601182527f5065726d697373696f6e2064656e6965640000000000000000000000000000006020830152604082019050919050565b606082016000820151611c466000850182611ada565b506020820151611c596020850182611ada565b506040820151611c6c6040850182611c72565b50505050565b611c7b81611f30565b82525050565b611c8a81611f3a565b82525050565b611c9981611f4e565b82525050565b6000606082019050611cb46000830186611ada565b611cc16020830185611ada565b611cce6040830184611c72565b949350505050565b6000602082019050611ceb6000830184611ae9565b92915050565b6000604082019050611d066000830185611af8565b8181036020830152611d188184611b3d565b90509392505050565b6000608082019050611d366000830187611af8565b611d436020830186611c90565b611d506040830185611af8565b611d5d6060830184611af8565b95945050505050565b60006020820190508181036000830152611d808184611bc3565b905092915050565b60006020820190508181036000830152611da181611bf9565b9050919050565b6000606082019050611dbd6000830184611c30565b92915050565b6000602082019050611dd86000830184611c81565b92915050565b600061012082019050611df4600083018c611c81565b611e01602083018b611c81565b611e0e604083018a611c72565b611e1b6060830189611c72565b611e286080830188611ada565b611e3560a0830187611ada565b611e4260c0830186611af8565b81810360e0830152611e548185611b07565b9050818103610100830152611e698184611b07565b90509a9950505050505050505050565b6000604051905081810181811067ffffffffffffffff82111715611e9c57600080fd5b8060405250919050565b600067ffffffffffffffff821115611ebd57600080fd5b601f19601f8301169050602081019050919050565b60008160005260206000209050919050565b600081519050919050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b6000819050919050565b600067ffffffffffffffff82169050919050565b600060ff82169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000819050919050565b600067ffffffffffffffff82169050919050565b600060ff82169050919050565b60005b83811015611fce578082015181840152602081019050611fb3565b83811115611fdd576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a7230582018d4845753dfc0093a384cec450671628e785c19cb266bf6c4082a513783f9f56c6578706572696d656e74616cf50037'
    async function btnSubmit() {

        var idProduct = parseInt($("#idProduct").val());
        var compensation = parseInt($("#compensation").val());
        var expireTime = parseInt($("#expireTime").val());
        if (confirm("Bạn có đồng ý tạo Hợp đồng mới")) {
        var acc = await accf();
        
        var Mycontract = ContractWarrantyabi.deploy({
            data: dataWarranty,
            arguments: [expireTime, compensation, idProduct]
        })

        Mycontract.send({
            from: acc,
            gasPrice: gasPrice,
            gasLimit: gasLimit
            })
            .on('transactionHash', function (transactionHash) {
            console.log('transactionHash', transactionHash)
            history.go(-1)
            })
            .then(async function (newContractInstance) {
            var ads = newContractInstance.options.address;
            console.log(ads)
            history.go(-1)
            });
        }
    }

    accf().then(acc=>{
        ContractProduct.methods.getAll().call({
            from: acc
        }).then(datas => {
            datas.forEach(async (v, k) => {
                if(v["id"]!=0){
                $("#idProduct").append(`<option value="${v["id"]}">${v["id"]} - ${v["name"]}</option>`)
                }
            })
        });
    });
        
</script>